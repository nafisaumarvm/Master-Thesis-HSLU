"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/ads/route";
exports.ids = ["app/api/ads/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fads%2Froute&page=%2Fapi%2Fads%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fads%2Froute.ts&appDir=%2FUsers%2Fnafisaumar%2FDocuments%2FMaster%20Thesis%2FDashboard%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fnafisaumar%2FDocuments%2FMaster%20Thesis%2FDashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fads%2Froute&page=%2Fapi%2Fads%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fads%2Froute.ts&appDir=%2FUsers%2Fnafisaumar%2FDocuments%2FMaster%20Thesis%2FDashboard%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fnafisaumar%2FDocuments%2FMaster%20Thesis%2FDashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_nafisaumar_Documents_Master_Thesis_Dashboard_app_api_ads_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/ads/route.ts */ \"(rsc)/./app/api/ads/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/ads/route\",\n        pathname: \"/api/ads\",\n        filename: \"route\",\n        bundlePath: \"app/api/ads/route\"\n    },\n    resolvedPagePath: \"/Users/nafisaumar/Documents/Master Thesis/Dashboard/app/api/ads/route.ts\",\n    nextConfigOutput,\n    userland: _Users_nafisaumar_Documents_Master_Thesis_Dashboard_app_api_ads_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/ads/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhZHMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmFkcyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmFkcyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRm5hZmlzYXVtYXIlMkZEb2N1bWVudHMlMkZNYXN0ZXIlMjBUaGVzaXMlMkZEYXNoYm9hcmQlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGbmFmaXNhdW1hciUyRkRvY3VtZW50cyUyRk1hc3RlciUyMFRoZXNpcyUyRkRhc2hib2FyZCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDd0I7QUFDckc7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ob3RlbC1hZHZlcnRpc2luZy1kYXNoYm9hcmQvP2Y0YTMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL25hZmlzYXVtYXIvRG9jdW1lbnRzL01hc3RlciBUaGVzaXMvRGFzaGJvYXJkL2FwcC9hcGkvYWRzL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hZHMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hZHNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2Fkcy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9uYWZpc2F1bWFyL0RvY3VtZW50cy9NYXN0ZXIgVGhlc2lzL0Rhc2hib2FyZC9hcHAvYXBpL2Fkcy9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvYWRzL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fads%2Froute&page=%2Fapi%2Fads%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fads%2Froute.ts&appDir=%2FUsers%2Fnafisaumar%2FDocuments%2FMaster%20Thesis%2FDashboard%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fnafisaumar%2FDocuments%2FMaster%20Thesis%2FDashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/ads/route.ts":
/*!******************************!*\
  !*** ./app/api/ads/route.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./lib/db.ts\");\n\n\n/**\n * Ads API\n * GET: Retrieve ads (filtered by advertiser if userId provided)\n * POST: Create a new ad\n * DELETE: Delete an ad\n */ async function GET(request) {\n    try {\n        const userId = request.nextUrl.searchParams.get(\"userId\");\n        let ads;\n        if (userId) {\n            ads = (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.getAds)(parseInt(userId));\n        } else {\n            ads = (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.getAds)();\n        }\n        const response = ads.map((ad)=>({\n                id: ad.id,\n                advertiser_id: ad.advertiser_id,\n                headline: ad.headline,\n                cta_text: ad.cta_text,\n                file_url: ad.file_url,\n                categories: ad.categories,\n                segments: ad.segments,\n                location: ad.location,\n                objective: ad.objective,\n                status: ad.status,\n                impressions: ad.impressions,\n                ctr_estimate: ad.ctr_estimate,\n                created_at: ad.created_at\n            }));\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(response, {\n            status: 200\n        });\n    } catch (error) {\n        console.error(\"Get ads error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to retrieve ads\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function POST(request) {\n    try {\n        const data = await request.json();\n        const { advertiser_id, hotel_id, headline, cta_text, file_url, qr_code_url, qr_placement, category, segments, weather_targeting, age_targeting, language_targeting, country, city, location, location_type, location_radius, objective, created_by_hotel } = data;\n        if (!headline || !cta_text || !category || !segments || !location || !objective) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Missing required fields\"\n            }, {\n                status: 400\n            });\n        }\n        if (!advertiser_id && !hotel_id) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Either advertiser_id or hotel_id is required\"\n            }, {\n                status: 400\n            });\n        }\n        // Generate estimated impressions based on segments (synthetic)\n        const estimatedImpressions = Math.floor(Math.random() * 500) + 200;\n        const estimatedCTR = (Math.random() * 3 + 1).toFixed(2);\n        const newAd = (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.createAd)({\n            advertiser_id: advertiser_id || null,\n            hotel_id: hotel_id || null,\n            headline,\n            cta_text,\n            file_url: file_url || \"/uploads/placeholder.jpg\",\n            qr_code_url: qr_code_url || \"\",\n            qr_placement: qr_placement || \"Welcome Screen\",\n            category,\n            segments,\n            weather_targeting: weather_targeting || [\n                \"any\"\n            ],\n            age_targeting: age_targeting || [],\n            language_targeting: language_targeting || [],\n            country: country || \"Switzerland\",\n            city: city || \"\",\n            location,\n            location_type: location_type || \"district\",\n            location_radius: location_radius || null,\n            objective,\n            ctr_estimate: parseFloat(estimatedCTR),\n            created_by_hotel: created_by_hotel || false\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            id: newAd.id,\n            estimated_impressions: estimatedImpressions\n        }, {\n            status: 201\n        });\n    } catch (error) {\n        console.error(\"Create ad error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to create ad\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function DELETE(request) {\n    try {\n        const adId = request.nextUrl.searchParams.get(\"adId\");\n        if (!adId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Ad ID required\"\n            }, {\n                status: 400\n            });\n        }\n        const success = (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.deleteAd)(parseInt(adId));\n        if (success) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true\n            }, {\n                status: 200\n            });\n        } else {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Ad not found\"\n            }, {\n                status: 404\n            });\n        }\n    } catch (error) {\n        console.error(\"Delete ad error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to delete ad\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cURBQVlBLENBQUM0QixJQUFJLENBQUM7WUFBRUMsT0FBTztRQUFzQixHQUFHO1lBQUVMLFFBQVE7UUFBSTtJQUMzRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaG90ZWwtYWR2ZXJ0aXNpbmctZGFzaGJvYXJkLy4vYXBwL2FwaS9hZHMvcm91dGUudHM/NDAyMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgZ2V0QWRzLCBjcmVhdGVBZCwgZGVsZXRlQWQgfSBmcm9tICdAL2xpYi9kYic7XG5pbXBvcnQgeyBBZCB9IGZyb20gJ0AvbGliL3R5cGVzJztcblxuLyoqXG4gKiBBZHMgQVBJXG4gKiBHRVQ6IFJldHJpZXZlIGFkcyAoZmlsdGVyZWQgYnkgYWR2ZXJ0aXNlciBpZiB1c2VySWQgcHJvdmlkZWQpXG4gKiBQT1NUOiBDcmVhdGUgYSBuZXcgYWRcbiAqIERFTEVURTogRGVsZXRlIGFuIGFkXG4gKi9cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHVzZXJJZCA9IHJlcXVlc3QubmV4dFVybC5zZWFyY2hQYXJhbXMuZ2V0KCd1c2VySWQnKTtcbiAgICBcbiAgICBsZXQgYWRzOiBhbnlbXTtcbiAgICBcbiAgICBpZiAodXNlcklkKSB7XG4gICAgICBhZHMgPSBnZXRBZHMocGFyc2VJbnQodXNlcklkKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFkcyA9IGdldEFkcygpO1xuICAgIH1cblxuICAgIGNvbnN0IHJlc3BvbnNlOiBBZFtdID0gYWRzLm1hcChhZCA9PiAoe1xuICAgICAgaWQ6IGFkLmlkLFxuICAgICAgYWR2ZXJ0aXNlcl9pZDogYWQuYWR2ZXJ0aXNlcl9pZCxcbiAgICAgIGhlYWRsaW5lOiBhZC5oZWFkbGluZSxcbiAgICAgIGN0YV90ZXh0OiBhZC5jdGFfdGV4dCxcbiAgICAgIGZpbGVfdXJsOiBhZC5maWxlX3VybCxcbiAgICAgIGNhdGVnb3JpZXM6IGFkLmNhdGVnb3JpZXMsXG4gICAgICBzZWdtZW50czogYWQuc2VnbWVudHMsXG4gICAgICBsb2NhdGlvbjogYWQubG9jYXRpb24sXG4gICAgICBvYmplY3RpdmU6IGFkLm9iamVjdGl2ZSxcbiAgICAgIHN0YXR1czogYWQuc3RhdHVzLFxuICAgICAgaW1wcmVzc2lvbnM6IGFkLmltcHJlc3Npb25zLFxuICAgICAgY3RyX2VzdGltYXRlOiBhZC5jdHJfZXN0aW1hdGUsXG4gICAgICBjcmVhdGVkX2F0OiBhZC5jcmVhdGVkX2F0LFxuICAgIH0pKTtcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihyZXNwb25zZSwgeyBzdGF0dXM6IDIwMCB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdHZXQgYWRzIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byByZXRyaWV2ZSBhZHMnIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgY29uc3QgeyBcbiAgICAgIGFkdmVydGlzZXJfaWQsIFxuICAgICAgaG90ZWxfaWQsXG4gICAgICBoZWFkbGluZSwgXG4gICAgICBjdGFfdGV4dCwgXG4gICAgICBmaWxlX3VybCwgXG4gICAgICBxcl9jb2RlX3VybCxcbiAgICAgIHFyX3BsYWNlbWVudCxcbiAgICAgIGNhdGVnb3J5LCBcbiAgICAgIHNlZ21lbnRzLCBcbiAgICAgIHdlYXRoZXJfdGFyZ2V0aW5nLFxuICAgICAgYWdlX3RhcmdldGluZyxcbiAgICAgIGxhbmd1YWdlX3RhcmdldGluZyxcbiAgICAgIGNvdW50cnksXG4gICAgICBjaXR5LFxuICAgICAgbG9jYXRpb24sXG4gICAgICBsb2NhdGlvbl90eXBlLFxuICAgICAgbG9jYXRpb25fcmFkaXVzLFxuICAgICAgb2JqZWN0aXZlLFxuICAgICAgY3JlYXRlZF9ieV9ob3RlbFxuICAgIH0gPSBkYXRhO1xuXG4gICAgaWYgKCFoZWFkbGluZSB8fCAhY3RhX3RleHQgfHwgIWNhdGVnb3J5IHx8ICFzZWdtZW50cyB8fCAhbG9jYXRpb24gfHwgIW9iamVjdGl2ZSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdNaXNzaW5nIHJlcXVpcmVkIGZpZWxkcycgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICB9XG5cbiAgICBpZiAoIWFkdmVydGlzZXJfaWQgJiYgIWhvdGVsX2lkKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0VpdGhlciBhZHZlcnRpc2VyX2lkIG9yIGhvdGVsX2lkIGlzIHJlcXVpcmVkJyB9LCB7IHN0YXR1czogNDAwIH0pO1xuICAgIH1cblxuICAgIC8vIEdlbmVyYXRlIGVzdGltYXRlZCBpbXByZXNzaW9ucyBiYXNlZCBvbiBzZWdtZW50cyAoc3ludGhldGljKVxuICAgIGNvbnN0IGVzdGltYXRlZEltcHJlc3Npb25zID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNTAwKSArIDIwMDtcbiAgICBjb25zdCBlc3RpbWF0ZWRDVFIgPSAoTWF0aC5yYW5kb20oKSAqIDMgKyAxKS50b0ZpeGVkKDIpO1xuXG4gICAgY29uc3QgbmV3QWQgPSBjcmVhdGVBZCh7XG4gICAgICBhZHZlcnRpc2VyX2lkOiBhZHZlcnRpc2VyX2lkIHx8IG51bGwsXG4gICAgICBob3RlbF9pZDogaG90ZWxfaWQgfHwgbnVsbCxcbiAgICAgIGhlYWRsaW5lLFxuICAgICAgY3RhX3RleHQsXG4gICAgICBmaWxlX3VybDogZmlsZV91cmwgfHwgJy91cGxvYWRzL3BsYWNlaG9sZGVyLmpwZycsXG4gICAgICBxcl9jb2RlX3VybDogcXJfY29kZV91cmwgfHwgJycsXG4gICAgICBxcl9wbGFjZW1lbnQ6IHFyX3BsYWNlbWVudCB8fCAnV2VsY29tZSBTY3JlZW4nLFxuICAgICAgY2F0ZWdvcnksXG4gICAgICBzZWdtZW50cyxcbiAgICAgIHdlYXRoZXJfdGFyZ2V0aW5nOiB3ZWF0aGVyX3RhcmdldGluZyB8fCBbJ2FueSddLFxuICAgICAgYWdlX3RhcmdldGluZzogYWdlX3RhcmdldGluZyB8fCBbXSxcbiAgICAgIGxhbmd1YWdlX3RhcmdldGluZzogbGFuZ3VhZ2VfdGFyZ2V0aW5nIHx8IFtdLFxuICAgICAgY291bnRyeTogY291bnRyeSB8fCAnU3dpdHplcmxhbmQnLFxuICAgICAgY2l0eTogY2l0eSB8fCAnJyxcbiAgICAgIGxvY2F0aW9uLFxuICAgICAgbG9jYXRpb25fdHlwZTogbG9jYXRpb25fdHlwZSB8fCAnZGlzdHJpY3QnLFxuICAgICAgbG9jYXRpb25fcmFkaXVzOiBsb2NhdGlvbl9yYWRpdXMgfHwgbnVsbCxcbiAgICAgIG9iamVjdGl2ZSxcbiAgICAgIGN0cl9lc3RpbWF0ZTogcGFyc2VGbG9hdChlc3RpbWF0ZWRDVFIpLFxuICAgICAgY3JlYXRlZF9ieV9ob3RlbDogY3JlYXRlZF9ieV9ob3RlbCB8fCBmYWxzZVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICBzdWNjZXNzOiB0cnVlLCBcbiAgICAgIGlkOiBuZXdBZC5pZCxcbiAgICAgIGVzdGltYXRlZF9pbXByZXNzaW9uczogZXN0aW1hdGVkSW1wcmVzc2lvbnMgXG4gICAgfSwgeyBzdGF0dXM6IDIwMSB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdDcmVhdGUgYWQgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIGNyZWF0ZSBhZCcgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gREVMRVRFKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgYWRJZCA9IHJlcXVlc3QubmV4dFVybC5zZWFyY2hQYXJhbXMuZ2V0KCdhZElkJyk7XG4gICAgXG4gICAgaWYgKCFhZElkKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0FkIElEIHJlcXVpcmVkJyB9LCB7IHN0YXR1czogNDAwIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHN1Y2Nlc3MgPSBkZWxldGVBZChwYXJzZUludChhZElkKSk7XG5cbiAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3VjY2VzczogdHJ1ZSB9LCB7IHN0YXR1czogMjAwIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0FkIG5vdCBmb3VuZCcgfSwgeyBzdGF0dXM6IDQwNCB9KTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRGVsZXRlIGFkIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBkZWxldGUgYWQnIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJnZXRBZHMiLCJjcmVhdGVBZCIsImRlbGV0ZUFkIiwiR0VUIiwicmVxdWVzdCIsInVzZXJJZCIsIm5leHRVcmwiLCJzZWFyY2hQYXJhbXMiLCJnZXQiLCJhZHMiLCJwYXJzZUludCIsInJlc3BvbnNlIiwibWFwIiwiYWQiLCJpZCIsImFkdmVydGlzZXJfaWQiLCJoZWFkbGluZSIsImN0YV90ZXh0IiwiZmlsZV91cmwiLCJjYXRlZ29yaWVzIiwic2VnbWVudHMiLCJsb2NhdGlvbiIsIm9iamVjdGl2ZSIsInN0YXR1cyIsImltcHJlc3Npb25zIiwiY3RyX2VzdGltYXRlIiwiY3JlYXRlZF9hdCIsImpzb24iLCJlcnJvciIsImNvbnNvbGUiLCJQT1NUIiwiZGF0YSIsImhvdGVsX2lkIiwicXJfY29kZV91cmwiLCJxcl9wbGFjZW1lbnQiLCJjYXRlZ29yeSIsIndlYXRoZXJfdGFyZ2V0aW5nIiwiYWdlX3RhcmdldGluZyIsImxhbmd1YWdlX3RhcmdldGluZyIsImNvdW50cnkiLCJjaXR5IiwibG9jYXRpb25fdHlwZSIsImxvY2F0aW9uX3JhZGl1cyIsImNyZWF0ZWRfYnlfaG90ZWwiLCJlc3RpbWF0ZWRJbXByZXNzaW9ucyIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImVzdGltYXRlZENUUiIsInRvRml4ZWQiLCJuZXdBZCIsInBhcnNlRmxvYXQiLCJzdWNjZXNzIiwiZXN0aW1hdGVkX2ltcHJlc3Npb25zIiwiREVMRVRFIiwiYWRJZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/ads/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db.ts":
/*!*******************!*\
  !*** ./lib/db.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAd: () => (/* binding */ createAd),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   deleteAd: () => (/* binding */ deleteAd),\n/* harmony export */   findUser: () => (/* binding */ findUser),\n/* harmony export */   findUserById: () => (/* binding */ findUserById),\n/* harmony export */   getAds: () => (/* binding */ getAds),\n/* harmony export */   getAllSegments: () => (/* binding */ getAllSegments),\n/* harmony export */   getAnalytics: () => (/* binding */ getAnalytics),\n/* harmony export */   getDb: () => (/* binding */ getDb),\n/* harmony export */   getHotelSettings: () => (/* binding */ getHotelSettings),\n/* harmony export */   updateHotelSettings: () => (/* binding */ updateHotelSettings)\n/* harmony export */ });\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n/**\n * Database management with JSON-based storage\n * No native dependencies required - works on all platforms\n * All data is synthetic and privacy-preserving\n */ \n\n\nconst dbPath = path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), \"data\", \"database.json\");\nlet db = null;\n// Ensure data directory exists\nfunction ensureDataDir() {\n    const dataDir = path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), \"data\");\n    if (!fs__WEBPACK_IMPORTED_MODULE_1___default().existsSync(dataDir)) {\n        fs__WEBPACK_IMPORTED_MODULE_1___default().mkdirSync(dataDir, {\n            recursive: true\n        });\n    }\n}\n// Load database from file\nfunction loadDatabase() {\n    ensureDataDir();\n    if (!fs__WEBPACK_IMPORTED_MODULE_1___default().existsSync(dbPath)) {\n        const emptyDb = {\n            users: [],\n            hotel_settings: [],\n            ads: [],\n            segments: [],\n            analytics: []\n        };\n        fs__WEBPACK_IMPORTED_MODULE_1___default().writeFileSync(dbPath, JSON.stringify(emptyDb, null, 2));\n        return emptyDb;\n    }\n    const data = fs__WEBPACK_IMPORTED_MODULE_1___default().readFileSync(dbPath, \"utf-8\");\n    return JSON.parse(data);\n}\n// Save database to file\nfunction saveDatabase(database) {\n    ensureDataDir();\n    fs__WEBPACK_IMPORTED_MODULE_1___default().writeFileSync(dbPath, JSON.stringify(database, null, 2));\n}\nfunction getDb() {\n    if (!db) {\n        db = loadDatabase();\n        initializeDatabase();\n    }\n    return db;\n}\nfunction initializeDatabase() {\n    if (!db) return;\n    // Check if data already exists\n    if (db.users.length > 0) return;\n    console.log(\"\\uD83D\\uDD04 Seeding database with synthetic data...\");\n    // Seed users\n    const hotelPassword = bcryptjs__WEBPACK_IMPORTED_MODULE_0___default().hashSync(\"hotel123\", 10);\n    const advertiserPassword = bcryptjs__WEBPACK_IMPORTED_MODULE_0___default().hashSync(\"advertiser123\", 10);\n    const hotelUser = {\n        id: 1,\n        email: \"hotel@example.com\",\n        password_hash: hotelPassword,\n        role: \"hotel\",\n        name: \"Grand Hotel Plaza\",\n        created_at: new Date().toISOString()\n    };\n    const advertiserUser = {\n        id: 2,\n        email: \"advertiser@example.com\",\n        password_hash: advertiserPassword,\n        role: \"advertiser\",\n        name: \"Local Business Co.\",\n        created_at: new Date().toISOString()\n    };\n    db.users.push(hotelUser, advertiserUser);\n    // Seed hotel settings with privacy-first defaults\n    db.hotel_settings.push({\n        id: 1,\n        user_id: hotelUser.id,\n        allowed_categories: [\n            \"restaurants\",\n            \"experiences\",\n            \"wellness\"\n        ],\n        exposure_rules: {\n            welcomeScreen: true,\n            idleMode: false,\n            sidebarBanner: false,\n            neverInterrupt: true\n        },\n        privacy_rules: {\n            anonymizedInsights: true,\n            autoDeletePostCheckout: true,\n            dataRetentionDays: 0,\n            gdprCompliant: true\n        }\n    });\n    // Seed segments (diverse traveler types)\n    const segments = [\n        {\n            id: 1,\n            name: \"Business Travelers\",\n            description: \"Professionals and corporate guests\",\n            percentage: 28.0,\n            characteristics: [\n                \"Mon-Thu arrivals\",\n                \"Single occupancy\",\n                \"Short stays (1-3 nights)\",\n                \"Conference attendees\",\n                \"High per-day spending\",\n                \"Late check-ins\"\n            ]\n        },\n        {\n            id: 2,\n            name: \"Leisure Travelers\",\n            description: \"Individual tourists and vacationers\",\n            percentage: 22.0,\n            characteristics: [\n                \"Weekend arrivals\",\n                \"Medium stays (2-4 nights)\",\n                \"Interest in sightseeing\",\n                \"Restaurant reservations\",\n                \"Local experiences\",\n                \"Flexible schedules\"\n            ]\n        },\n        {\n            id: 3,\n            name: \"Families with Children\",\n            description: \"Parents traveling with kids\",\n            percentage: 18.0,\n            characteristics: [\n                \"School holidays\",\n                \"Multiple rooms\",\n                \"Family-friendly activities\",\n                \"Early dining\",\n                \"Connecting rooms\",\n                \"Kid-focused amenities\"\n            ]\n        },\n        {\n            id: 4,\n            name: \"Groups (3+ people)\",\n            description: \"Friend groups, tours, and team bookings\",\n            percentage: 15.0,\n            characteristics: [\n                \"Multiple room bookings\",\n                \"Shared experiences\",\n                \"Evening activities\",\n                \"Group dining\",\n                \"Event attendees\",\n                \"Social atmosphere\"\n            ]\n        },\n        {\n            id: 5,\n            name: \"Couples\",\n            description: \"Romantic getaways and couples trips\",\n            percentage: 12.0,\n            characteristics: [\n                \"Weekend breaks\",\n                \"Romance packages\",\n                \"Spa interest\",\n                \"Fine dining\",\n                \"Privacy preference\",\n                \"Special occasions\"\n            ]\n        },\n        {\n            id: 6,\n            name: \"Solo Travelers\",\n            description: \"Independent travelers and digital nomads\",\n            percentage: 5.0,\n            characteristics: [\n                \"Flexible schedules\",\n                \"Single occupancy\",\n                \"Co-working spaces\",\n                \"Social lounges\",\n                \"Extended stays\",\n                \"Local immersion\"\n            ]\n        }\n    ];\n    db.segments.push(...segments);\n    // Seed sample ads (Swiss market focused)\n    const sampleAds = [\n        {\n            id: 1,\n            advertiser_id: advertiserUser.id,\n            headline: \"Authentic Swiss & Italian Cuisine\",\n            cta_text: \"Reserve Your Table\",\n            file_url: \"/uploads/sample-restaurant.jpg\",\n            qr_code_url: \"https://restaurant-zurich.ch/reserve\",\n            qr_placement: \"Bottom Right\",\n            category: \"restaurants\",\n            segments: [\n                \"Business Travelers\",\n                \"Leisure Travelers\",\n                \"Couples\"\n            ],\n            weather_targeting: [\n                \"any\"\n            ],\n            age_targeting: [\n                \"25-34\",\n                \"35-44\",\n                \"45-54\"\n            ],\n            language_targeting: [\n                \"German\",\n                \"English\",\n                \"Italian\"\n            ],\n            country: \"Switzerland\",\n            city: \"Z\\xfcrich\",\n            location: \"Z\\xfcrich, Switzerland\",\n            location_type: \"radius\",\n            location_radius: 2,\n            objective: \"footfall\",\n            status: \"active\",\n            impressions: 1247,\n            ctr_estimate: 2.8,\n            created_at: new Date().toISOString(),\n            created_by_hotel: false\n        }\n    ];\n    db.ads.push(...sampleAds);\n    // Seed analytics with revenue calculation\n    const totalImpressions = 2139;\n    const avgCostPer100 = 6.80; // CHF\n    const totalAdSpend = totalImpressions / 100 * avgCostPer100; // ~CHF 145.45\n    const revenueSharePercentage = 30; // Hotel receives 30%\n    const hotelRevenue = totalAdSpend * (revenueSharePercentage / 100); // ~CHF 43.64\n    db.analytics.push({\n        id: 1,\n        user_id: hotelUser.id,\n        impressions_this_week: totalImpressions,\n        estimated_conversions: 43,\n        top_category: \"restaurants\",\n        occupancy_multiplier: 1.15,\n        revenue_generated: parseFloat(hotelRevenue.toFixed(2)),\n        revenue_share_percentage: revenueSharePercentage,\n        total_ad_spend: parseFloat(totalAdSpend.toFixed(2)),\n        last_updated: new Date().toISOString()\n    });\n    // Save to disk\n    saveDatabase(db);\n    console.log(\"âœ… Database seeded with synthetic data\");\n}\n// Helper functions for CRUD operations\nfunction findUser(email) {\n    const database = getDb();\n    return database.users.find((u)=>u.email === email);\n}\nfunction findUserById(id) {\n    const database = getDb();\n    return database.users.find((u)=>u.id === id);\n}\nfunction getHotelSettings(userId) {\n    const database = getDb();\n    return database.hotel_settings.find((s)=>s.user_id === userId);\n}\nfunction updateHotelSettings(userId, settings) {\n    const database = getDb();\n    const index = database.hotel_settings.findIndex((s)=>s.user_id === userId);\n    if (index !== -1) {\n        database.hotel_settings[index] = {\n            ...database.hotel_settings[index],\n            ...settings,\n            user_id: userId\n        };\n        saveDatabase(database);\n        return true;\n    }\n    return false;\n}\nfunction getAnalytics(userId) {\n    const database = getDb();\n    return database.analytics.find((a)=>a.user_id === userId);\n}\nfunction getAllSegments() {\n    const database = getDb();\n    return database.segments;\n}\nfunction getAds(advertiserId) {\n    const database = getDb();\n    if (advertiserId) {\n        return database.ads.filter((a)=>a.advertiser_id === advertiserId);\n    }\n    return database.ads;\n}\nfunction createAd(ad) {\n    const database = getDb();\n    const newId = database.ads.length > 0 ? Math.max(...database.ads.map((a)=>a.id)) + 1 : 1;\n    const newAd = {\n        ...ad,\n        id: newId,\n        status: \"active\",\n        impressions: 0,\n        created_at: new Date().toISOString()\n    };\n    database.ads.push(newAd);\n    saveDatabase(database);\n    return newAd;\n}\nfunction deleteAd(adId) {\n    const database = getDb();\n    const index = database.ads.findIndex((a)=>a.id === adId);\n    if (index !== -1) {\n        database.ads.splice(index, 1);\n        saveDatabase(database);\n        return true;\n    }\n    return false;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (getDb);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R0wsRUFBRTtRQUNML0UsSUFBSWdGO1FBQ0p0QyxRQUFRO1FBQ1JDLGFBQWE7UUFDYnRDLFlBQVksSUFBSUMsT0FBT0MsV0FBVztJQUNwQztJQUNBakIsU0FBU1YsR0FBRyxDQUFDNkIsSUFBSSxDQUFDMkU7SUFDbEIvRixhQUFhQztJQUNiLE9BQU84RjtBQUNUO0FBRU8sU0FBU0MsU0FBU0MsSUFBWTtJQUNuQyxNQUFNaEcsV0FBV0M7SUFDakIsTUFBTStFLFFBQVFoRixTQUFTVixHQUFHLENBQUMyRixTQUFTLENBQUNFLENBQUFBLElBQUtBLEVBQUV6RSxFQUFFLEtBQUtzRjtJQUNuRCxJQUFJaEIsVUFBVSxDQUFDLEdBQUc7UUFDaEJoRixTQUFTVixHQUFHLENBQUMyRyxNQUFNLENBQUNqQixPQUFPO1FBQzNCakYsYUFBYUM7UUFDYixPQUFPO0lBQ1Q7SUFDQSxPQUFPO0FBQ1Q7QUFFQSxpRUFBZUMsS0FBS0EsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2hvdGVsLWFkdmVydGlzaW5nLWRhc2hib2FyZC8uL2xpYi9kYi50cz8xZGYwIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogRGF0YWJhc2UgbWFuYWdlbWVudCB3aXRoIEpTT04tYmFzZWQgc3RvcmFnZVxuICogTm8gbmF0aXZlIGRlcGVuZGVuY2llcyByZXF1aXJlZCAtIHdvcmtzIG9uIGFsbCBwbGF0Zm9ybXNcbiAqIEFsbCBkYXRhIGlzIHN5bnRoZXRpYyBhbmQgcHJpdmFjeS1wcmVzZXJ2aW5nXG4gKi9cblxuaW1wb3J0IGJjcnlwdCBmcm9tICdiY3J5cHRqcyc7XG5pbXBvcnQgZnMgZnJvbSAnZnMnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5cbmNvbnN0IGRiUGF0aCA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAnZGF0YScsICdkYXRhYmFzZS5qc29uJyk7XG5cbmludGVyZmFjZSBEYXRhYmFzZSB7XG4gIHVzZXJzOiBhbnlbXTtcbiAgaG90ZWxfc2V0dGluZ3M6IGFueVtdO1xuICBhZHM6IGFueVtdO1xuICBzZWdtZW50czogYW55W107XG4gIGFuYWx5dGljczogYW55W107XG59XG5cbmxldCBkYjogRGF0YWJhc2UgfCBudWxsID0gbnVsbDtcblxuLy8gRW5zdXJlIGRhdGEgZGlyZWN0b3J5IGV4aXN0c1xuZnVuY3Rpb24gZW5zdXJlRGF0YURpcigpIHtcbiAgY29uc3QgZGF0YURpciA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAnZGF0YScpO1xuICBpZiAoIWZzLmV4aXN0c1N5bmMoZGF0YURpcikpIHtcbiAgICBmcy5ta2RpclN5bmMoZGF0YURpciwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gIH1cbn1cblxuLy8gTG9hZCBkYXRhYmFzZSBmcm9tIGZpbGVcbmZ1bmN0aW9uIGxvYWREYXRhYmFzZSgpOiBEYXRhYmFzZSB7XG4gIGVuc3VyZURhdGFEaXIoKTtcbiAgXG4gIGlmICghZnMuZXhpc3RzU3luYyhkYlBhdGgpKSB7XG4gICAgY29uc3QgZW1wdHlEYjogRGF0YWJhc2UgPSB7XG4gICAgICB1c2VyczogW10sXG4gICAgICBob3RlbF9zZXR0aW5nczogW10sXG4gICAgICBhZHM6IFtdLFxuICAgICAgc2VnbWVudHM6IFtdLFxuICAgICAgYW5hbHl0aWNzOiBbXVxuICAgIH07XG4gICAgZnMud3JpdGVGaWxlU3luYyhkYlBhdGgsIEpTT04uc3RyaW5naWZ5KGVtcHR5RGIsIG51bGwsIDIpKTtcbiAgICByZXR1cm4gZW1wdHlEYjtcbiAgfVxuICBcbiAgY29uc3QgZGF0YSA9IGZzLnJlYWRGaWxlU3luYyhkYlBhdGgsICd1dGYtOCcpO1xuICByZXR1cm4gSlNPTi5wYXJzZShkYXRhKTtcbn1cblxuLy8gU2F2ZSBkYXRhYmFzZSB0byBmaWxlXG5mdW5jdGlvbiBzYXZlRGF0YWJhc2UoZGF0YWJhc2U6IERhdGFiYXNlKSB7XG4gIGVuc3VyZURhdGFEaXIoKTtcbiAgZnMud3JpdGVGaWxlU3luYyhkYlBhdGgsIEpTT04uc3RyaW5naWZ5KGRhdGFiYXNlLCBudWxsLCAyKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXREYigpOiBEYXRhYmFzZSB7XG4gIGlmICghZGIpIHtcbiAgICBkYiA9IGxvYWREYXRhYmFzZSgpO1xuICAgIGluaXRpYWxpemVEYXRhYmFzZSgpO1xuICB9XG4gIHJldHVybiBkYjtcbn1cblxuZnVuY3Rpb24gaW5pdGlhbGl6ZURhdGFiYXNlKCkge1xuICBpZiAoIWRiKSByZXR1cm47XG5cbiAgLy8gQ2hlY2sgaWYgZGF0YSBhbHJlYWR5IGV4aXN0c1xuICBpZiAoZGIudXNlcnMubGVuZ3RoID4gMCkgcmV0dXJuO1xuXG4gIGNvbnNvbGUubG9nKCfwn5SEIFNlZWRpbmcgZGF0YWJhc2Ugd2l0aCBzeW50aGV0aWMgZGF0YS4uLicpO1xuXG4gIC8vIFNlZWQgdXNlcnNcbiAgY29uc3QgaG90ZWxQYXNzd29yZCA9IGJjcnlwdC5oYXNoU3luYygnaG90ZWwxMjMnLCAxMCk7XG4gIGNvbnN0IGFkdmVydGlzZXJQYXNzd29yZCA9IGJjcnlwdC5oYXNoU3luYygnYWR2ZXJ0aXNlcjEyMycsIDEwKTtcblxuICBjb25zdCBob3RlbFVzZXIgPSB7XG4gICAgaWQ6IDEsXG4gICAgZW1haWw6ICdob3RlbEBleGFtcGxlLmNvbScsXG4gICAgcGFzc3dvcmRfaGFzaDogaG90ZWxQYXNzd29yZCxcbiAgICByb2xlOiAnaG90ZWwnLFxuICAgIG5hbWU6ICdHcmFuZCBIb3RlbCBQbGF6YScsXG4gICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gIH07XG5cbiAgY29uc3QgYWR2ZXJ0aXNlclVzZXIgPSB7XG4gICAgaWQ6IDIsXG4gICAgZW1haWw6ICdhZHZlcnRpc2VyQGV4YW1wbGUuY29tJyxcbiAgICBwYXNzd29yZF9oYXNoOiBhZHZlcnRpc2VyUGFzc3dvcmQsXG4gICAgcm9sZTogJ2FkdmVydGlzZXInLFxuICAgIG5hbWU6ICdMb2NhbCBCdXNpbmVzcyBDby4nLFxuICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICB9O1xuXG4gIGRiLnVzZXJzLnB1c2goaG90ZWxVc2VyLCBhZHZlcnRpc2VyVXNlcik7XG5cbiAgLy8gU2VlZCBob3RlbCBzZXR0aW5ncyB3aXRoIHByaXZhY3ktZmlyc3QgZGVmYXVsdHNcbiAgZGIuaG90ZWxfc2V0dGluZ3MucHVzaCh7XG4gICAgaWQ6IDEsXG4gICAgdXNlcl9pZDogaG90ZWxVc2VyLmlkLFxuICAgIGFsbG93ZWRfY2F0ZWdvcmllczogWydyZXN0YXVyYW50cycsICdleHBlcmllbmNlcycsICd3ZWxsbmVzcyddLFxuICAgIGV4cG9zdXJlX3J1bGVzOiB7XG4gICAgICB3ZWxjb21lU2NyZWVuOiB0cnVlLFxuICAgICAgaWRsZU1vZGU6IGZhbHNlLFxuICAgICAgc2lkZWJhckJhbm5lcjogZmFsc2UsXG4gICAgICBuZXZlckludGVycnVwdDogdHJ1ZVxuICAgIH0sXG4gICAgcHJpdmFjeV9ydWxlczoge1xuICAgICAgYW5vbnltaXplZEluc2lnaHRzOiB0cnVlLFxuICAgICAgYXV0b0RlbGV0ZVBvc3RDaGVja291dDogdHJ1ZSxcbiAgICAgIGRhdGFSZXRlbnRpb25EYXlzOiAwLFxuICAgICAgZ2RwckNvbXBsaWFudDogdHJ1ZVxuICAgIH1cbiAgfSk7XG5cbiAgLy8gU2VlZCBzZWdtZW50cyAoZGl2ZXJzZSB0cmF2ZWxlciB0eXBlcylcbiAgY29uc3Qgc2VnbWVudHMgPSBbXG4gICAge1xuICAgICAgaWQ6IDEsXG4gICAgICBuYW1lOiAnQnVzaW5lc3MgVHJhdmVsZXJzJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnUHJvZmVzc2lvbmFscyBhbmQgY29ycG9yYXRlIGd1ZXN0cycsXG4gICAgICBwZXJjZW50YWdlOiAyOC4wLFxuICAgICAgY2hhcmFjdGVyaXN0aWNzOiBbJ01vbi1UaHUgYXJyaXZhbHMnLCAnU2luZ2xlIG9jY3VwYW5jeScsICdTaG9ydCBzdGF5cyAoMS0zIG5pZ2h0cyknLCAnQ29uZmVyZW5jZSBhdHRlbmRlZXMnLCAnSGlnaCBwZXItZGF5IHNwZW5kaW5nJywgJ0xhdGUgY2hlY2staW5zJ11cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAyLFxuICAgICAgbmFtZTogJ0xlaXN1cmUgVHJhdmVsZXJzJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnSW5kaXZpZHVhbCB0b3VyaXN0cyBhbmQgdmFjYXRpb25lcnMnLFxuICAgICAgcGVyY2VudGFnZTogMjIuMCxcbiAgICAgIGNoYXJhY3RlcmlzdGljczogWydXZWVrZW5kIGFycml2YWxzJywgJ01lZGl1bSBzdGF5cyAoMi00IG5pZ2h0cyknLCAnSW50ZXJlc3QgaW4gc2lnaHRzZWVpbmcnLCAnUmVzdGF1cmFudCByZXNlcnZhdGlvbnMnLCAnTG9jYWwgZXhwZXJpZW5jZXMnLCAnRmxleGlibGUgc2NoZWR1bGVzJ11cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAzLFxuICAgICAgbmFtZTogJ0ZhbWlsaWVzIHdpdGggQ2hpbGRyZW4nLFxuICAgICAgZGVzY3JpcHRpb246ICdQYXJlbnRzIHRyYXZlbGluZyB3aXRoIGtpZHMnLFxuICAgICAgcGVyY2VudGFnZTogMTguMCxcbiAgICAgIGNoYXJhY3RlcmlzdGljczogWydTY2hvb2wgaG9saWRheXMnLCAnTXVsdGlwbGUgcm9vbXMnLCAnRmFtaWx5LWZyaWVuZGx5IGFjdGl2aXRpZXMnLCAnRWFybHkgZGluaW5nJywgJ0Nvbm5lY3Rpbmcgcm9vbXMnLCAnS2lkLWZvY3VzZWQgYW1lbml0aWVzJ11cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiA0LFxuICAgICAgbmFtZTogJ0dyb3VwcyAoMysgcGVvcGxlKScsXG4gICAgICBkZXNjcmlwdGlvbjogJ0ZyaWVuZCBncm91cHMsIHRvdXJzLCBhbmQgdGVhbSBib29raW5ncycsXG4gICAgICBwZXJjZW50YWdlOiAxNS4wLFxuICAgICAgY2hhcmFjdGVyaXN0aWNzOiBbJ011bHRpcGxlIHJvb20gYm9va2luZ3MnLCAnU2hhcmVkIGV4cGVyaWVuY2VzJywgJ0V2ZW5pbmcgYWN0aXZpdGllcycsICdHcm91cCBkaW5pbmcnLCAnRXZlbnQgYXR0ZW5kZWVzJywgJ1NvY2lhbCBhdG1vc3BoZXJlJ11cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiA1LFxuICAgICAgbmFtZTogJ0NvdXBsZXMnLFxuICAgICAgZGVzY3JpcHRpb246ICdSb21hbnRpYyBnZXRhd2F5cyBhbmQgY291cGxlcyB0cmlwcycsXG4gICAgICBwZXJjZW50YWdlOiAxMi4wLFxuICAgICAgY2hhcmFjdGVyaXN0aWNzOiBbJ1dlZWtlbmQgYnJlYWtzJywgJ1JvbWFuY2UgcGFja2FnZXMnLCAnU3BhIGludGVyZXN0JywgJ0ZpbmUgZGluaW5nJywgJ1ByaXZhY3kgcHJlZmVyZW5jZScsICdTcGVjaWFsIG9jY2FzaW9ucyddXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogNixcbiAgICAgIG5hbWU6ICdTb2xvIFRyYXZlbGVycycsXG4gICAgICBkZXNjcmlwdGlvbjogJ0luZGVwZW5kZW50IHRyYXZlbGVycyBhbmQgZGlnaXRhbCBub21hZHMnLFxuICAgICAgcGVyY2VudGFnZTogNS4wLFxuICAgICAgY2hhcmFjdGVyaXN0aWNzOiBbJ0ZsZXhpYmxlIHNjaGVkdWxlcycsICdTaW5nbGUgb2NjdXBhbmN5JywgJ0NvLXdvcmtpbmcgc3BhY2VzJywgJ1NvY2lhbCBsb3VuZ2VzJywgJ0V4dGVuZGVkIHN0YXlzJywgJ0xvY2FsIGltbWVyc2lvbiddXG4gICAgfVxuICBdO1xuXG4gIGRiLnNlZ21lbnRzLnB1c2goLi4uc2VnbWVudHMpO1xuXG4gIC8vIFNlZWQgc2FtcGxlIGFkcyAoU3dpc3MgbWFya2V0IGZvY3VzZWQpXG4gIGNvbnN0IHNhbXBsZUFkcyA9IFtcbiAgICB7XG4gICAgICBpZDogMSxcbiAgICAgIGFkdmVydGlzZXJfaWQ6IGFkdmVydGlzZXJVc2VyLmlkLFxuICAgICAgaGVhZGxpbmU6ICdBdXRoZW50aWMgU3dpc3MgJiBJdGFsaWFuIEN1aXNpbmUnLFxuICAgICAgY3RhX3RleHQ6ICdSZXNlcnZlIFlvdXIgVGFibGUnLFxuICAgICAgZmlsZV91cmw6ICcvdXBsb2Fkcy9zYW1wbGUtcmVzdGF1cmFudC5qcGcnLFxuICAgICAgcXJfY29kZV91cmw6ICdodHRwczovL3Jlc3RhdXJhbnQtenVyaWNoLmNoL3Jlc2VydmUnLFxuICAgICAgcXJfcGxhY2VtZW50OiAnQm90dG9tIFJpZ2h0JyxcbiAgICAgIGNhdGVnb3J5OiAncmVzdGF1cmFudHMnLFxuICAgICAgc2VnbWVudHM6IFsnQnVzaW5lc3MgVHJhdmVsZXJzJywgJ0xlaXN1cmUgVHJhdmVsZXJzJywgJ0NvdXBsZXMnXSxcbiAgICAgIHdlYXRoZXJfdGFyZ2V0aW5nOiBbJ2FueSddLFxuICAgICAgYWdlX3RhcmdldGluZzogWycyNS0zNCcsICczNS00NCcsICc0NS01NCddLFxuICAgICAgbGFuZ3VhZ2VfdGFyZ2V0aW5nOiBbJ0dlcm1hbicsICdFbmdsaXNoJywgJ0l0YWxpYW4nXSxcbiAgICAgIGNvdW50cnk6ICdTd2l0emVybGFuZCcsXG4gICAgICBjaXR5OiAnWsO8cmljaCcsXG4gICAgICBsb2NhdGlvbjogJ1rDvHJpY2gsIFN3aXR6ZXJsYW5kJyxcbiAgICAgIGxvY2F0aW9uX3R5cGU6ICdyYWRpdXMnLFxuICAgICAgbG9jYXRpb25fcmFkaXVzOiAyLFxuICAgICAgb2JqZWN0aXZlOiAnZm9vdGZhbGwnLFxuICAgICAgc3RhdHVzOiAnYWN0aXZlJyxcbiAgICAgIGltcHJlc3Npb25zOiAxMjQ3LFxuICAgICAgY3RyX2VzdGltYXRlOiAyLjgsXG4gICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICBjcmVhdGVkX2J5X2hvdGVsOiBmYWxzZVxuICAgIH1cbiAgXTtcblxuICBkYi5hZHMucHVzaCguLi5zYW1wbGVBZHMpO1xuXG4gIC8vIFNlZWQgYW5hbHl0aWNzIHdpdGggcmV2ZW51ZSBjYWxjdWxhdGlvblxuICBjb25zdCB0b3RhbEltcHJlc3Npb25zID0gMjEzOTtcbiAgY29uc3QgYXZnQ29zdFBlcjEwMCA9IDYuODA7IC8vIENIRlxuICBjb25zdCB0b3RhbEFkU3BlbmQgPSAodG90YWxJbXByZXNzaW9ucyAvIDEwMCkgKiBhdmdDb3N0UGVyMTAwOyAvLyB+Q0hGIDE0NS40NVxuICBjb25zdCByZXZlbnVlU2hhcmVQZXJjZW50YWdlID0gMzA7IC8vIEhvdGVsIHJlY2VpdmVzIDMwJVxuICBjb25zdCBob3RlbFJldmVudWUgPSB0b3RhbEFkU3BlbmQgKiAocmV2ZW51ZVNoYXJlUGVyY2VudGFnZSAvIDEwMCk7IC8vIH5DSEYgNDMuNjRcblxuICBkYi5hbmFseXRpY3MucHVzaCh7XG4gICAgaWQ6IDEsXG4gICAgdXNlcl9pZDogaG90ZWxVc2VyLmlkLFxuICAgIGltcHJlc3Npb25zX3RoaXNfd2VlazogdG90YWxJbXByZXNzaW9ucyxcbiAgICBlc3RpbWF0ZWRfY29udmVyc2lvbnM6IDQzLFxuICAgIHRvcF9jYXRlZ29yeTogJ3Jlc3RhdXJhbnRzJyxcbiAgICBvY2N1cGFuY3lfbXVsdGlwbGllcjogMS4xNSxcbiAgICByZXZlbnVlX2dlbmVyYXRlZDogcGFyc2VGbG9hdChob3RlbFJldmVudWUudG9GaXhlZCgyKSksXG4gICAgcmV2ZW51ZV9zaGFyZV9wZXJjZW50YWdlOiByZXZlbnVlU2hhcmVQZXJjZW50YWdlLFxuICAgIHRvdGFsX2FkX3NwZW5kOiBwYXJzZUZsb2F0KHRvdGFsQWRTcGVuZC50b0ZpeGVkKDIpKSxcbiAgICBsYXN0X3VwZGF0ZWQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICB9KTtcblxuICAvLyBTYXZlIHRvIGRpc2tcbiAgc2F2ZURhdGFiYXNlKGRiKTtcblxuICBjb25zb2xlLmxvZygn4pyFIERhdGFiYXNlIHNlZWRlZCB3aXRoIHN5bnRoZXRpYyBkYXRhJyk7XG59XG5cbi8vIEhlbHBlciBmdW5jdGlvbnMgZm9yIENSVUQgb3BlcmF0aW9uc1xuXG5leHBvcnQgZnVuY3Rpb24gZmluZFVzZXIoZW1haWw6IHN0cmluZykge1xuICBjb25zdCBkYXRhYmFzZSA9IGdldERiKCk7XG4gIHJldHVybiBkYXRhYmFzZS51c2Vycy5maW5kKHUgPT4gdS5lbWFpbCA9PT0gZW1haWwpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZmluZFVzZXJCeUlkKGlkOiBudW1iZXIpIHtcbiAgY29uc3QgZGF0YWJhc2UgPSBnZXREYigpO1xuICByZXR1cm4gZGF0YWJhc2UudXNlcnMuZmluZCh1ID0+IHUuaWQgPT09IGlkKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEhvdGVsU2V0dGluZ3ModXNlcklkOiBudW1iZXIpIHtcbiAgY29uc3QgZGF0YWJhc2UgPSBnZXREYigpO1xuICByZXR1cm4gZGF0YWJhc2UuaG90ZWxfc2V0dGluZ3MuZmluZChzID0+IHMudXNlcl9pZCA9PT0gdXNlcklkKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUhvdGVsU2V0dGluZ3ModXNlcklkOiBudW1iZXIsIHNldHRpbmdzOiBhbnkpIHtcbiAgY29uc3QgZGF0YWJhc2UgPSBnZXREYigpO1xuICBjb25zdCBpbmRleCA9IGRhdGFiYXNlLmhvdGVsX3NldHRpbmdzLmZpbmRJbmRleChzID0+IHMudXNlcl9pZCA9PT0gdXNlcklkKTtcbiAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgIGRhdGFiYXNlLmhvdGVsX3NldHRpbmdzW2luZGV4XSA9IHtcbiAgICAgIC4uLmRhdGFiYXNlLmhvdGVsX3NldHRpbmdzW2luZGV4XSxcbiAgICAgIC4uLnNldHRpbmdzLFxuICAgICAgdXNlcl9pZDogdXNlcklkXG4gICAgfTtcbiAgICBzYXZlRGF0YWJhc2UoZGF0YWJhc2UpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEFuYWx5dGljcyh1c2VySWQ6IG51bWJlcikge1xuICBjb25zdCBkYXRhYmFzZSA9IGdldERiKCk7XG4gIHJldHVybiBkYXRhYmFzZS5hbmFseXRpY3MuZmluZChhID0+IGEudXNlcl9pZCA9PT0gdXNlcklkKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEFsbFNlZ21lbnRzKCkge1xuICBjb25zdCBkYXRhYmFzZSA9IGdldERiKCk7XG4gIHJldHVybiBkYXRhYmFzZS5zZWdtZW50cztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEFkcyhhZHZlcnRpc2VySWQ/OiBudW1iZXIpIHtcbiAgY29uc3QgZGF0YWJhc2UgPSBnZXREYigpO1xuICBpZiAoYWR2ZXJ0aXNlcklkKSB7XG4gICAgcmV0dXJuIGRhdGFiYXNlLmFkcy5maWx0ZXIoYSA9PiBhLmFkdmVydGlzZXJfaWQgPT09IGFkdmVydGlzZXJJZCk7XG4gIH1cbiAgcmV0dXJuIGRhdGFiYXNlLmFkcztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUFkKGFkOiBhbnkpIHtcbiAgY29uc3QgZGF0YWJhc2UgPSBnZXREYigpO1xuICBjb25zdCBuZXdJZCA9IGRhdGFiYXNlLmFkcy5sZW5ndGggPiAwID8gTWF0aC5tYXgoLi4uZGF0YWJhc2UuYWRzLm1hcChhID0+IGEuaWQpKSArIDEgOiAxO1xuICBjb25zdCBuZXdBZCA9IHtcbiAgICAuLi5hZCxcbiAgICBpZDogbmV3SWQsXG4gICAgc3RhdHVzOiAnYWN0aXZlJyxcbiAgICBpbXByZXNzaW9uczogMCxcbiAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgfTtcbiAgZGF0YWJhc2UuYWRzLnB1c2gobmV3QWQpO1xuICBzYXZlRGF0YWJhc2UoZGF0YWJhc2UpO1xuICByZXR1cm4gbmV3QWQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVBZChhZElkOiBudW1iZXIpIHtcbiAgY29uc3QgZGF0YWJhc2UgPSBnZXREYigpO1xuICBjb25zdCBpbmRleCA9IGRhdGFiYXNlLmFkcy5maW5kSW5kZXgoYSA9PiBhLmlkID09PSBhZElkKTtcbiAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgIGRhdGFiYXNlLmFkcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIHNhdmVEYXRhYmFzZShkYXRhYmFzZSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5leHBvcnQgZGVmYXVsdCBnZXREYjtcbiJdLCJuYW1lcyI6WyJiY3J5cHQiLCJmcyIsInBhdGgiLCJkYlBhdGgiLCJqb2luIiwicHJvY2VzcyIsImN3ZCIsImRiIiwiZW5zdXJlRGF0YURpciIsImRhdGFEaXIiLCJleGlzdHNTeW5jIiwibWtkaXJTeW5jIiwicmVjdXJzaXZlIiwibG9hZERhdGFiYXNlIiwiZW1wdHlEYiIsInVzZXJzIiwiaG90ZWxfc2V0dGluZ3MiLCJhZHMiLCJzZWdtZW50cyIsImFuYWx5dGljcyIsIndyaXRlRmlsZVN5bmMiLCJKU09OIiwic3RyaW5naWZ5IiwiZGF0YSIsInJlYWRGaWxlU3luYyIsInBhcnNlIiwic2F2ZURhdGFiYXNlIiwiZGF0YWJhc2UiLCJnZXREYiIsImluaXRpYWxpemVEYXRhYmFzZSIsImxlbmd0aCIsImNvbnNvbGUiLCJsb2ciLCJob3RlbFBhc3N3b3JkIiwiaGFzaFN5bmMiLCJhZHZlcnRpc2VyUGFzc3dvcmQiLCJob3RlbFVzZXIiLCJpZCIsImVtYWlsIiwicGFzc3dvcmRfaGFzaCIsInJvbGUiLCJuYW1lIiwiY3JlYXRlZF9hdCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImFkdmVydGlzZXJVc2VyIiwicHVzaCIsInVzZXJfaWQiLCJhbGxvd2VkX2NhdGVnb3JpZXMiLCJleHBvc3VyZV9ydWxlcyIsIndlbGNvbWVTY3JlZW4iLCJpZGxlTW9kZSIsInNpZGViYXJCYW5uZXIiLCJuZXZlckludGVycnVwdCIsInByaXZhY3lfcnVsZXMiLCJhbm9ueW1pemVkSW5zaWdodHMiLCJhdXRvRGVsZXRlUG9zdENoZWNrb3V0IiwiZGF0YVJldGVudGlvbkRheXMiLCJnZHByQ29tcGxpYW50IiwiZGVzY3JpcHRpb24iLCJwZXJjZW50YWdlIiwiY2hhcmFjdGVyaXN0aWNzIiwic2FtcGxlQWRzIiwiYWR2ZXJ0aXNlcl9pZCIsImhlYWRsaW5lIiwiY3RhX3RleHQiLCJmaWxlX3VybCIsInFyX2NvZGVfdXJsIiwicXJfcGxhY2VtZW50IiwiY2F0ZWdvcnkiLCJ3ZWF0aGVyX3RhcmdldGluZyIsImFnZV90YXJnZXRpbmciLCJsYW5ndWFnZV90YXJnZXRpbmciLCJjb3VudHJ5IiwiY2l0eSIsImxvY2F0aW9uIiwibG9jYXRpb25fdHlwZSIsImxvY2F0aW9uX3JhZGl1cyIsIm9iamVjdGl2ZSIsInN0YXR1cyIsImltcHJlc3Npb25zIiwiY3RyX2VzdGltYXRlIiwiY3JlYXRlZF9ieV9ob3RlbCIsInRvdGFsSW1wcmVzc2lvbnMiLCJhdmdDb3N0UGVyMTAwIiwidG90YWxBZFNwZW5kIiwicmV2ZW51ZVNoYXJlUGVyY2VudGFnZSIsImhvdGVsUmV2ZW51ZSIsImltcHJlc3Npb25zX3RoaXNfd2VlayIsImVzdGltYXRlZF9jb252ZXJzaW9ucyIsInRvcF9jYXRlZ29yeSIsIm9jY3VwYW5jeV9tdWx0aXBsaWVyIiwicmV2ZW51ZV9nZW5lcmF0ZWQiLCJwYXJzZUZsb2F0IiwidG9GaXhlZCIsInJldmVudWVfc2hhcmVfcGVyY2VudGFnZSIsInRvdGFsX2FkX3NwZW5kIiwibGFzdF91cGRhdGVkIiwiZmluZFVzZXIiLCJmaW5kIiwidSIsImZpbmRVc2VyQnlJZCIsImdldEhvdGVsU2V0dGluZ3MiLCJ1c2VySWQiLCJzIiwidXBkYXRlSG90ZWxTZXR0aW5ncyIsInNldHRpbmdzIiwiaW5kZXgiLCJmaW5kSW5kZXgiLCJnZXRBbmFseXRpY3MiLCJhIiwiZ2V0QWxsU2VnbWVudHMiLCJnZXRBZHMiLCJhZHZlcnRpc2VySWQiLCJmaWx0ZXIiLCJjcmVhdGVBZCIsImFkIiwibmV3SWQiLCJNYXRoIiwibWF4IiwibWFwIiwibmV3QWQiLCJkZWxldGVBZCIsImFkSWQiLCJzcGxpY2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/db.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/bcryptjs"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fads%2Froute&page=%2Fapi%2Fads%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fads%2Froute.ts&appDir=%2FUsers%2Fnafisaumar%2FDocuments%2FMaster%20Thesis%2FDashboard%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fnafisaumar%2FDocuments%2FMaster%20Thesis%2FDashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();